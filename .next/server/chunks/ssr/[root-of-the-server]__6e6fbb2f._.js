module.exports=[56081,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored.contexts.AppRouterContext},63164,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored["react-ssr"].ReactServerDOMTurbopackClient},22394,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored.contexts.HooksClientContext},25857,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},81869,(a,b,c)=>{"use strict";b.exports=a.r(18622)},95548,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored["react-ssr"].ReactJsxRuntime},61491,(a,b,c)=>{"use strict";b.exports=a.r(81869).vendored["react-ssr"].React},53868,a=>{"use strict";var b=a.i(95548),c=a.i(11537);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("rounded-xl border border-white/10 bg-white/5 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("p-5 border-b border-white/10",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("p-5",a),...d})}function g({className:a,...d}){return(0,b.jsx)("h3",{className:(0,c.cn)("font-semibold leading-none tracking-tight",a),...d})}a.s(["Card",()=>d,"CardContent",()=>f,"CardHeader",()=>e,"CardTitle",()=>g])},72510,a=>{"use strict";var b=a.i(95548),c=a.i(11537);function d({className:a,...d}){return(0,b.jsx)("input",{className:(0,c.cn)("w-full rounded-md border border-white/15 bg-white/10 px-3 py-2 text-sm text-white placeholder:text-white/50","focus:outline-none focus:ring-2 focus:ring-white/25",a),...d})}a.s(["Input",()=>d])},563,a=>{"use strict";var b=a.i(95548),c=a.i(11537);function d({className:a,...d}){return(0,b.jsx)("label",{className:(0,c.cn)("text-sm text-white/80",a),...d})}a.s(["Label",()=>d])},79816,a=>{"use strict";var b=a.i(95548),c=a.i(61491),d=a.i(86433),e=a.i(55864);function f({title:a,children:c}){return(0,b.jsxs)("div",{className:"min-h-screen flex",children:[(0,b.jsx)(d.Sidebar,{}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)(e.Topbar,{title:a}),(0,b.jsx)("main",{className:"p-6",children:c})]})]})}var g=a.i(53868),h=a.i(81900),i=a.i(72510),j=a.i(563);function k(){let[a,d]=(0,c.useState)([]),[e,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(50),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)("Hello, we have an offer for your business. Please reply for more details."),[v,w]=(0,c.useState)("whatsapp"),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{fetch("/api/leads/filters").then(a=>a.json()).then(a=>{m(a.industries??[]),o(a.areas??[])}).catch(()=>{})},[]);let z=a.length>0&&e.length>0;async function A(){y(!0);let b=await fetch("/api/leads/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({industries:a,areas:e,limit:p})});s((await b.json().catch(()=>({}))).leads??[]),y(!1)}let B=(0,c.useMemo)(()=>r.map(a=>a.lead_id),[r]);async function C(){if(0===r.length)return alert("Pull leads first");y(!0);let b=await fetch("/api/campaigns/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({industries:a,areas:e,total_leads:r.length})}),c=await b.json().catch(()=>({})),d=await fetch("/api/messages/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:c.client_id,campaign_id:c.campaign_id,channel:v,message:t,lead_ids:B})}),f=await d.json().catch(()=>({}));if(y(!1),!d.ok)return alert(f?.error??"Send failed");location.href=`/results?campaign_id=${encodeURIComponent(c.campaign_id)}`}return(0,b.jsx)(f,{title:"Lead Generation Machine",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(g.Card,{className:"lg:col-span-2",children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:"Filters"}),(0,b.jsx)("div",{className:"text-white/60 text-sm",children:"Select industry + area, then pull leads."})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{children:"Industries (Multi Select)"}),(0,b.jsx)("div",{className:"mt-2 max-h-56 overflow-auto space-y-2 pr-2",children:l.map(c=>(0,b.jsxs)("label",{className:"flex items-center gap-2 text-white/80 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.includes(c.name),onChange:a=>d(b=>a.target.checked?[...b,c.name]:b.filter(a=>a!==c.name))}),c.name]},c.name))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{children:"Areas (Multi Select)"}),(0,b.jsx)("div",{className:"mt-2 max-h-56 overflow-auto space-y-2 pr-2",children:n.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 text-white/80 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:e.includes(a.name),onChange:b=>k(c=>b.target.checked?[...c,a.name]:c.filter(b=>b!==a.name))}),a.name]},a.name))})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{children:"Limit"}),(0,b.jsx)(i.Input,{type:"number",value:p,onChange:a=>q(parseInt(a.target.value||"0",10))})]}),(0,b.jsx)("div",{className:"md:col-span-2 flex gap-3 justify-end",children:(0,b.jsx)(h.Button,{variant:"secondary",disabled:!z||x,onClick:A,children:x?"Working...":"Pull Data"})})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4",children:[(0,b.jsxs)("div",{className:"text-white/70 text-sm mb-2",children:["Leads Found: ",(0,b.jsx)("b",{className:"text-white",children:r.length})]}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm text-white/80",children:[(0,b.jsx)("thead",{className:"text-white/60",children:(0,b.jsxs)("tr",{className:"border-b border-white/10",children:[(0,b.jsx)("th",{className:"py-2 text-left",children:"Name"}),(0,b.jsx)("th",{className:"py-2 text-left",children:"Industry"}),(0,b.jsx)("th",{className:"py-2 text-left",children:"Area"}),(0,b.jsx)("th",{className:"py-2 text-left",children:"WhatsApp"}),(0,b.jsx)("th",{className:"py-2 text-left",children:"Email"})]})}),(0,b.jsx)("tbody",{children:0===r.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"py-3",children:"No leads pulled yet."})}):r.slice(0,50).map(a=>(0,b.jsxs)("tr",{className:"border-b border-white/10",children:[(0,b.jsx)("td",{className:"py-2",children:a.name}),(0,b.jsx)("td",{className:"py-2",children:a.industry}),(0,b.jsx)("td",{className:"py-2",children:a.area}),(0,b.jsx)("td",{className:"py-2",children:a.whatsapp}),(0,b.jsx)("td",{className:"py-2",children:a.email})]},a.lead_id))})]})})]})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)("div",{className:"text-white font-semibold",children:"Message Details"}),(0,b.jsx)("div",{className:"text-white/60 text-sm",children:"Compose message and send."})]}),(0,b.jsxs)(g.CardContent,{className:"space-y-3",children:[(0,b.jsx)(j.Label,{children:"Channel"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(h.Button,{variant:"whatsapp"===v?"primary":"secondary",onClick:()=>w("whatsapp"),children:"WhatsApp"}),(0,b.jsx)(h.Button,{variant:"email"===v?"primary":"secondary",onClick:()=>w("email"),children:"Email"}),(0,b.jsx)(h.Button,{variant:"both"===v?"primary":"secondary",onClick:()=>w("both"),children:"Both"})]}),(0,b.jsx)(j.Label,{children:"Message"}),(0,b.jsx)("textarea",{className:"w-full min-h-40 rounded-md border border-white/15 bg-white/10 p-3 text-sm text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-white/25",value:t,onChange:a=>u(a.target.value)}),(0,b.jsxs)("div",{className:"text-xs text-white/60",children:["Characters: ",t.length]}),(0,b.jsx)(h.Button,{disabled:0===r.length||x,onClick:C,className:"w-full",children:x?"Sending...":"Pull Data & Send Messages"})]})]})]})})}a.s(["default",()=>k],79816)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6e6fbb2f._.js.map